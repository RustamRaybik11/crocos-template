(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[921],{4184:function(e,n){var t;/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/!function(){"use strict";var s={}.hasOwnProperty;function r(){for(var e=[],n=0;n<arguments.length;n++){var t=arguments[n];if(t){var o=typeof t;if("string"===o||"number"===o)e.push(t);else if(Array.isArray(t)){if(t.length){var i=r.apply(null,t);i&&e.push(i)}}else if("object"===o){if(t.toString!==Object.prototype.toString&&!t.toString.toString().includes("[native code]")){e.push(t.toString());continue}for(var a in t)s.call(t,a)&&t[a]&&e.push(a)}}}return e.join(" ")}e.exports?(r.default=r,e.exports=r):void 0!==(t=(function(){return r}).apply(n,[]))&&(e.exports=t)}()},1977:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/login/ecp",function(){return t(2085)}])},4585:function(e,n,t){"use strict";var s=t(5893);t(7294);var r=t(7267),o=t.n(r),i=t(4184),a=t.n(i);let l=e=>{let{children:n}=e;return n?(0,s.jsx)("small",{className:a()(o().error),children:n}):null};n.Z=l},8824:function(e,n,t){"use strict";t.d(n,{t:function(){return r}});var s=t(7294);function r(e,n){(0,s.useEffect)(()=>{let t=t=>{!e.current||e.current.contains(t.target)||n(t)};return document.addEventListener("mousedown",t),document.addEventListener("touchstart",t),()=>{document.removeEventListener("mousedown",t),document.removeEventListener("touchstart",t)}},[e,n])}},7094:function(e,n,t){"use strict";var s=t(5893);t(7294),n.Z=function(){return(0,s.jsx)("svg",{width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{d:"M4.5 6.75L9 11.25L13.5 6.75",stroke:"#0F85EE",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}},1125:function(e,n,t){"use strict";t.d(n,{SY:function(){return i},Vw:function(){return o}}),t(1163);var s=t(5678);let r=(e,n,t)=>{!n||"object"!=typeof n||n instanceof Date||n instanceof File?e.append(t,null==n?"":n):Object.keys(n).forEach(s=>{r(e,n[s],t?"".concat(t,"[").concat(s,"]"):s)})},o=e=>{s.Am.error(e,{position:"bottom-right",autoClose:4e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})},i=e=>{s.Am.success(e,{position:"bottom-right",autoClose:4e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},2085:function(e,n,t){"use strict";t.r(n),t.d(n,{__N_SSP:function(){return w},default:function(){return j}});var s=t(5893),r=t(7294),o=t(1664),i=t.n(o),a=t(2323),l=t(1163);let c=()=>(0,s.jsxs)("svg",{width:"20",height:"21",viewBox:"0 0 20 21",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,s.jsx)("path",{d:"M10.0003 18.6842C14.6027 18.6842 18.3337 14.9533 18.3337 10.3509C18.3337 5.74854 14.6027 2.01758 10.0003 2.01758C5.39795 2.01758 1.66699 5.74854 1.66699 10.3509C1.66699 14.9533 5.39795 18.6842 10.0003 18.6842Z",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,s.jsx)("path",{d:"M6.66699 10.3516L10.0003 13.6849L13.3337 10.3516",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,s.jsx)("path",{d:"M10 7.01758V13.6842",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]});var u=t(2283),d=t(9918),g=t(1125),p=t(6117),h=t(4585),f=t(8824),v=t(7094);let m=()=>{let[e,n]=(0,r.useState)(""),{t,i18n:o}=(0,u.$G)(),[m,_]=(0,r.useState)(!1),k=(0,r.useRef)(null);(0,f.t)(k,()=>_(!1));let w=()=>{let e=new WebSocket("wss://127.0.0.1:13579/"),s=null,r={path:null,owner:null,data:null};e.onopen=()=>{e.send(JSON.stringify({module:"kz.gov.pki.knca.commonUtils",method:"signXml",args:["PKCS12","AUTHENTICATION","<login><sessionid>caacda70-fd36-45ed-8d94-45a88890f83a</sessionid></login>","",""]}))},e.onclose=e=>{e.wasClean?console.log("connection closed"):(alert(t("nca_layer_message")),console.log("error?"),setTimeout(()=>{},5e3))},e.onmessage=e=>{let s=JSON.parse(e.data);r.data=s.responseObject;let o={ecp:s.responseObject};o.ecp&&d.e.signInUserPki(o).then(e=>{var n;p.g.setUserToken(null==e?void 0:null===(n=e.data)||void 0===n?void 0:n.token),d.e.getCurrentUser().then(e=>{"admin"===e.data.data.role.slug?window.location.href="/admin":window.location.href="/profile"})}).catch(e=>{"Пользователь не найден"===e.response.data.message?n(e.response.data.message):n("".concat(t("wrong_data"))),(0,g.Vw)("".concat(t("error_occured")))}).finally(x(!1))}},{isLoading:j,setIsLoading:x}=(0,a.d$)(),N=(0,l.useRouter)(),{pathname:b,asPath:C,query:E,locale:y}=N,L=(e,n)=>{n.preventDefault(),N.push({pathname:b,query:E},C,{locale:e})};return(0,s.jsx)("div",{className:"login__wrapper--bg",children:(0,s.jsxs)("div",{className:"login__wrapper",children:[(0,s.jsxs)("div",{className:"login__wrapper_top",children:[(0,s.jsx)("img",{className:"logo-img",src:"/assets/images/new-logo".concat("kk"===N.locale?"-kaz":"",".svg"),alt:"logo"}),(0,s.jsxs)("div",{className:"sidemenu-user__dropdown",children:[(0,s.jsxs)("div",{className:"sidemenu-user__dropdown--main main__header--lang ".concat(m?"lang--open":""),onClick:()=>_(!0),children:["ru"===o.language?t("rus_lang"):t("kaz_lang"),(0,s.jsx)(v.Z,{})]}),(0,s.jsxs)("div",{ref:k,className:"sidemenu-user__dropdown--hiden header--lang__items ".concat(m?"active":""),children:[(0,s.jsx)("span",{onClick:e=>{L("ru",e)},className:"ru"===o.language?"active":"",children:t("rus_lang")}),(0,s.jsx)("span",{onClick:e=>{L("kk",e)},className:"kk"===o.language?"active":"",children:t("kaz_lang")})]})]})]}),(0,s.jsx)("h1",{children:t("autorization")}),(0,s.jsxs)("div",{className:"login__registration",style:{gap:10},children:[(0,s.jsxs)("div",{className:"c-btn c-btn-primary c-btn-rounded",onClick:w,children:[(0,s.jsx)(c,{})," ",t("upload_setrificat")]}),(0,s.jsx)(h.Z,{children:e&&t("".concat(e))}),(0,s.jsx)(i(),{href:"/login",children:(0,s.jsx)("button",{className:"c-btn",style:{color:"#f69f34"},children:t("sign_in_login")})})]})]})})};var _=t(8580);let k=()=>{let[e,n]=(0,r.useState)(!1),{t}=(0,u.$G)(),{userInfo:o,updateUserInfo:i}=(0,_.E)(),a=(0,l.useRouter)();return((0,r.useEffect)(()=>{o&&a.push("/profile")},[o]),(0,r.useEffect)(()=>{n(!0)},[]),e)?(0,s.jsx)(m,{}):null};var w=!0,j=k},7267:function(e){e.exports={error:"styles_error__BdAxH"}}},function(e){e.O(0,[877,774,888,179],function(){return e(e.s=1977)}),_N_E=e.O()}]);